{% extends "base.html" %}

{% block lab %}Лабораторная работа 8{% endblock %}

{% block head %}
<link rel="stylesheet" href="{{ url_for('static', filename='lab8.css') }}">
{% endblock %}

{% block main %}
<h1>Результаты поиска</h1>

<nav class="lab8-menu">
    <a href="/lab8/">Главная</a>
    <a href="/lab8/search">Новый поиск</a>
    <a href="/lab8/public">Публичные статьи</a>
    {% if current_user.is_authenticated %}
        <a href="/lab8/articles">Мои статьи</a>
    {% endif %}
</nav>

<p>
    По запросу "<strong>{{ query }}</strong>"
    найдено статей: <strong>{{ count }}</strong>
</p>

{% if articles %}
    <ul style="list-style: none; padding: 0;">
        {% for article in articles %}
            <li style="border: 1px solid #ccc; padding: 10px; margin: 10px 0; border-radius: 5px;">
                <h3>{{ article.title }}</h3>

                <p>{{ article.article_text[:200] }}...</p>

                <p>
                    <strong>Автор:</strong> {{ article.author.login if article.author else 'Неизвестен' }} |
                    <strong>Статус:</strong>
                    {% if article.is_public %}
                        Публичная
                    {% else %}
                        Приватная
                    {% endif %}
                    |
                    {% if article.is_favorite %}
                        ★ Избранная |
                    {% endif %}
                    <strong>Лайков:</strong> {{ article.likes }}

                    {% if current_user.is_authenticated and article.login_id == current_user.id %}
                        <span style="color: green;">(Ваша статья)</span>
                    {% endif %}
                </p>
            </li>
        {% endfor %}
    </ul>
{% else %}
    <p>По вашему запросу ничего не найдено.</p>
{% endif %}
{% endblock %}
